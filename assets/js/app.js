function openDatabase(){return navigator.serviceWorker?idb.open("fantasy-football-watchlist",1,function(e){e.createObjectStore("players",{keyPath:"player_id"})}):(displayMessage("WARNING: your web browser doesn't fully support this app",null,"dismiss"),Promise.resolve())}function IndexController(){this.db=openDatabase(),this.registerServiceWorker()}var path=window.location.pathname,page=path.split("/").pop();IndexController.prototype.registerServiceWorker=function(){if(!("serviceWorker"in navigator))return void displayMessage("WARNING: your web browser doesn't fully support this app.  Try this app in chrome.",null,"dismiss");navigator.serviceWorker.register("./service-worker.js",{scope:"./"}).then(function(e){return e.waiting?void displayMessage("New update available!","Refresh","dismiss",function(e){e.postMessage({action:"skipWaiting"})},e.waiting):e.installing?void Controller.trackInstalling(e.installing):void e.addEventListener("updatefound",function(){Controller.trackInstalling(e.installing)})})["catch"](function(e){console.log("Service Worker Failed to Register",e)});var e;navigator.serviceWorker.addEventListener("controllerchange",function(){e||(window.location.reload(),e=!0)})},IndexController.prototype.trackInstalling=function(e){e.addEventListener("statechange",function(){"installed"==e.state&&displayMessage("New Update available!","update now!","dismiss",function(e){e.postMessage({action:"skipWaiting"})},e)})};var Controller=new IndexController;$(document).ready(function(){"/"!=path&&fetch("./assets/data/players.json").then(function(e){return e.json()})["catch"](function(e){console.log(e)}).then(function(e){var t=e.Players,n=$("#players-list").html(),i=Handlebars.compile(n);$("#playersList").append(i(t))})});